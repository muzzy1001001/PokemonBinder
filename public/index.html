<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pokemon Binder</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="binder-rings" aria-hidden="true"></div>

    <div class="app-shell">
      <aside class="sidebar" aria-label="Sidebar Navigation">
        <div class="sidebar-brand">
          <p class="sidebar-brand-kicker">Trainer Toolkit</p>
          <h2>Pokemon Binder</h2>
        </div>

        <div class="sidebar-group">
          <p class="sidebar-group-title">Dashboard</p>
          <button
            class="sidebar-link is-active"
            type="button"
            data-view="dashboard"
            data-title="Binder Dashboard"
            data-subtitle="Track your personal collection like a real binder."
          >
            <span>Dashboard</span>
          </button>
        </div>

        <div class="sidebar-group">
          <p class="sidebar-group-title">Contents</p>
          <button
            class="sidebar-link"
            type="button"
            data-view="finder"
            data-title="Card Finder"
            data-subtitle="Search by name, set, and sort to catalog your collection."
          >
            <span>Card Finder</span>
          </button>
          <button
            class="sidebar-link"
            type="button"
            data-view="binder"
            data-title="Collection Goal"
            data-subtitle="Build custom collection boards and track missing cards."
          >
            <span>Collection Goal</span>
          </button>
          <button
            class="sidebar-link"
            type="button"
            data-view="pokedex"
            data-title="Pokedex"
            data-subtitle="Track all Pokemon names in your collection progress."
          >
            <span>Pokedex</span>
          </button>
          <button
            class="sidebar-link"
            type="button"
            data-view="gacha"
            data-title="Gacha Draw"
            data-subtitle="Open virtual booster packs and add pulls to your binder."
          >
            <span>Gacha Draw</span>
          </button>
        </div>
      </aside>

      <main class="workspace">
        <header class="workspace-header">
          <p class="workspace-kicker">Personal Virtual Binder</p>
          <h1 id="workspaceTitle">Binder Dashboard</h1>
          <p id="workspaceSubtitle">
            Track your personal collection like a real binder.
          </p>
        </header>

        <section id="view-dashboard" class="view is-active" aria-label="Binder Dashboard">
          <section class="panel panel-dashboard">
            <div class="panel-heading">
              <h2>Trainer Dashboard</h2>
              <p>Quick look at your profile and collection performance.</p>
            </div>

            <div class="dashboard-grid">
              <article class="dashboard-card dashboard-profile-card">
                <h3>Trainer Profile</h3>
                <div class="trainer-profile-row">
                  <button id="trainerAvatarBtn" type="button" class="trainer-avatar-btn" aria-label="Change profile photo">
                    <span id="trainerAvatarInitial" class="trainer-avatar-initial">?</span>
                    <img id="trainerAvatarImage" class="trainer-avatar-image" alt="Trainer profile" hidden />
                  </button>
                  <div class="trainer-profile-meta">
                    <p class="trainer-profile-kicker">Trainer ID</p>
                    <p id="trainerUid" class="trainer-profile-id">PK-00000000</p>
                  </div>
                </div>
                <input id="trainerAvatarInput" type="file" accept="image/*" hidden />
                <div class="trainer-ign-row">
                  <p class="trainer-profile-kicker">IGN</p>
                  <p id="trainerIgnDisplay" class="trainer-ign-display">Unknown Trainer</p>
                  <button id="trainerIgnEditBtn" type="button" class="trainer-ign-edit" aria-label="Edit IGN">âœŽ</button>
                </div>
              </article>

              <article class="dashboard-card dashboard-stat-card">
                <h3>Cards Owned</h3>
                <p id="dashboardCardsOwned" class="dashboard-stat-value">0</p>
                <p id="dashboardUniqueOwned" class="dashboard-stat-sub">0 unique cards</p>
              </article>

              <article class="dashboard-card dashboard-stat-card">
                <h3>Collection Net Worth</h3>
                <p id="dashboardNetWorth" class="dashboard-stat-value">$0.00</p>
                <p class="dashboard-stat-sub">Based on latest available sold/market values</p>
              </article>

              <article class="dashboard-card dashboard-stat-card">
                <h3>God Packs Opened</h3>
                <p id="dashboardGodPacks" class="dashboard-stat-value">0</p>
                <p class="dashboard-stat-sub">Across all gacha sessions</p>
              </article>
            </div>

            <section class="dashboard-top-showcase">
              <div class="panel-heading panel-heading-compact">
                <h3>Favorite Cards</h3>
                <p id="dashboardFavoriteMeta">Pin your most-loved cards from Finder, Binder, or Top Value.</p>
              </div>
              <div id="dashboardFavoriteCards" class="dashboard-top-grid"></div>
            </section>

            <section class="dashboard-top-showcase">
              <div class="panel-heading panel-heading-compact">
                <h3>Highest Value Cards</h3>
                <p id="dashboardTopMeta">Highest last sold value cards in your active binder.</p>
              </div>
              <div id="dashboardTopCards" class="dashboard-top-grid"></div>
            </section>

          </section>
        </section>

        <section id="view-binder" class="view" aria-label="Collection Goal">
          <section class="panel panel-binder">
            <div class="panel-heading">
              <h2>Collection Goal</h2>
              <p id="binderStats">0 / 0 obtained | 0 total copies</p>
            </div>

            <section class="binder-goals-builder">
              <div class="panel-heading panel-heading-compact">
                <h3>Collection Goal Boards</h3>
                <p>Create custom binder goals (like all Gengars or full Surging Sparks) with your own PNG board design.</p>
              </div>

              <div class="controls controls-goals">
                <label>
                  Goal Title
                  <input id="goalTitleInput" type="text" placeholder="All Gengars" maxlength="50" />
                </label>

                <label>
                  Goal Type
                  <select id="goalTypeSelect">
                    <option value="pokemon">Pokemon Name</option>
                    <option value="set">Entire Set</option>
                    <option value="custom">Custom Search</option>
                  </select>
                </label>

                <label>
                  Keyword
                  <input id="goalKeywordInput" type="text" placeholder="Gengar" maxlength="40" />
                </label>

                <label>
                  Set (optional)
                  <select id="goalSetSelect">
                    <option value="">All sets</option>
                  </select>
                </label>

                <button id="addGoalBtn" type="button">Add Goal Board</button>
              </div>

              <div id="goalGrid" class="goal-grid"></div>
            </section>

            <div class="binder-legacy" hidden>
            <div class="controls controls-binder-manager" hidden>
              <label>
                Active Binder
                <select id="binderPicker"></select>
              </label>

              <button id="addBinderBtn" type="button">New Binder</button>
              <button id="renameBinderBtn" type="button" class="ghost-btn">Rename</button>
              <button id="deleteBinderBtn" type="button" class="ghost-btn">Delete</button>
              <button id="clearBinder" type="button" class="ghost-btn">Clear Active Binder</button>
            </div>

            <div class="controls controls-binder">
              <label>
                Collection
                <select id="binderCollectionPreset">
                  <option value="all_set">All Cards (By Set)</option>
                  <option value="pokemon_151">Pokemon 151</option>
                  <option value="mega">Mega Evolutions</option>
                </select>
              </label>

              <label>
                Set
                <select id="binderCollectionSet">
                  <option value="">Choose a set</option>
                </select>
              </label>

              <label>
                Search binder
                <input
                  id="binderSearch"
                  type="search"
                  placeholder="Name, set, or notes"
                />
              </label>

              <label>
                Sort binder
                <select id="binderSort">
                  <option value="number_asc">Card Number</option>
                  <option value="name_asc">Name A-Z</option>
                  <option value="name_desc">Name Z-A</option>
                  <option value="value_desc">Highest Value</option>
                  <option value="updated_desc">Recently Updated</option>
                  <option value="date_obtained_desc">Newest Obtained</option>
                </select>
              </label>

              <label>
                Condition
                <select id="binderCondition">
                  <option value="">All conditions</option>
                  <option value="Mint">Mint</option>
                  <option value="Near Mint">Near Mint</option>
                  <option value="Lightly Played">Lightly Played</option>
                  <option value="Moderately Played">Moderately Played</option>
                  <option value="Heavily Played">Heavily Played</option>
                  <option value="Damaged">Damaged</option>
                </select>
              </label>
            </div>

            <div id="binderList" class="binder-grid"></div>
            </div>
          </section>
        </section>

        <section id="view-pokedex" class="view" aria-label="Pokedex">
          <section class="panel panel-pokedex">
            <div class="panel-heading">
              <h2>Pokedex</h2>
              <p id="pokedexMeta">Loading Pokedex...</p>
            </div>

            <div class="controls controls-pokedex">
              <label>
                Sort Pokedex
                <select id="pokedexSort">
                  <option value="generation_asc">Generation 1 -> Latest</option>
                  <option value="generation_desc">Latest -> Generation 1</option>
                  <option value="name_asc">Name A-Z</option>
                  <option value="name_desc">Name Z-A</option>
                  <option value="rarity_desc">Rarest -> Common</option>
                  <option value="rarity_asc">Common -> Rarest</option>
                  <option value="owned_first">Owned First</option>
                  <option value="missing_first">Missing First</option>
                  <option value="set_newest">Newest Set</option>
                  <option value="set_oldest">Oldest Set</option>
                </select>
              </label>
            </div>

            <div id="pokedexLayout" class="pokedex-layout">
              <div id="pokedexGrid" class="pokedex-grid"></div>

              <section id="pokedexGalleryPanel" class="pokedex-gallery-panel" hidden>
                <header class="pokedex-gallery-header">
                  <div>
                    <h3 id="pokedexGalleryTitle">Pokemon Gallery</h3>
                    <p id="pokedexGalleryMeta">Choose an obtained card to set as your Pokedex preview.</p>
                  </div>
                  <button id="pokedexGalleryCloseBtn" type="button" class="ghost-btn">Back</button>
                </header>
                <div id="pokedexGalleryGrid" class="pokedex-gallery-grid"></div>
              </section>
            </div>
          </section>
        </section>

        <section id="view-finder" class="view" aria-label="Card Finder">
          <section class="panel">
            <div class="panel-heading">
              <h2>Card Finder</h2>
              <p>Powered by Pokemon TCG data source</p>
            </div>

            <div class="controls controls-finder">
              <label>
                Search Pokemon
                <input
                  id="searchInput"
                  type="search"
                  placeholder="Try Pikachu, Charizard, Eevee..."
                />
              </label>

              <label>
                Pack / Set
                <select id="setFilter">
                  <option value="">All packs</option>
                </select>
              </label>

              <label>
                Sort by
                <select id="sortSelect">
                  <option value="name_asc">Name A-Z</option>
                  <option value="name_desc">Name Z-A</option>
                  <option value="hp_desc">Highest HP</option>
                  <option value="hp_asc">Lowest HP</option>
                  <option value="newest">Newest Set</option>
                  <option value="oldest">Oldest Set</option>
                </select>
              </label>
            </div>

            <div class="result-bar">
              <p id="resultMeta">Loading cards...</p>
              <div class="pager">
                <button id="prevPage" type="button">Previous</button>
                <span id="pageInfo">Page 1</span>
                <button id="nextPage" type="button">Next</button>
              </div>
            </div>

            <div id="cardGrid" class="card-grid"></div>
          </section>
        </section>

        <section id="view-gacha" class="view" aria-label="Gacha Draw">
          <section class="panel panel-gacha">
            <div class="panel-heading">
              <h2>Booster Gacha</h2>
              <p>Open virtual packs by set. Click any pack tile to inspect and cut it open.</p>
            </div>

            <div class="controls controls-gacha">
              <div class="gacha-pack-picker-field">
                <p class="gacha-pack-picker-title">Choose Pack Set</p>
                <div
                  id="gachaPackPicker"
                  class="gacha-pack-picker"
                  role="listbox"
                  aria-label="Choose pack set"
                ></div>
              </div>
            </div>

            <p class="gacha-picker-help">Click a pack tile to pop it out and open it.</p>

            <div id="gachaPopout" class="gacha-popout" aria-hidden="true">
              <div id="gachaPopoutBackdrop" class="gacha-popout-backdrop" data-close-gacha-popout></div>
              <section
                id="gachaPopoutPanel"
                class="gacha-popout-panel is-info-hidden"
                role="dialog"
                aria-modal="true"
                aria-label="Open selected booster pack"
              >
                <div class="gacha-popout-layout">
                  <div class="gacha-stage">
                    <button id="gachaPackCard" class="gacha-pack" type="button">
                      <div class="gacha-pack-visual" aria-hidden="true">
                        <img id="gachaPackArt" class="gacha-pack-art" alt="Booster pack art" />
                        <img id="gachaPackLogo" class="gacha-pack-logo" alt="Pack logo" />
                      </div>

                      <div id="gachaCutLayer" class="gacha-cut-layer">
                        <svg id="gachaCutSvg" preserveAspectRatio="none">
                          <path id="gachaCutGuideRail" class="gacha-cut-guide-rail" d=""></path>
                          <path id="gachaCutGuidePath" class="gacha-cut-guide" d=""></path>
                          <path id="gachaCutPath" class="gacha-cut-path" d=""></path>
                        </svg>
                        <p class="gacha-cut-hint">OPEN PACK</p>
                      </div>
                    </button>
                    <div class="gacha-pack-meta">
                      <p id="gachaPackSeries" class="gacha-pack-series"></p>
                      <p id="gachaPackName" class="gacha-pack-name"></p>
                      <p class="gacha-pack-cta">Cut to open</p>
                    </div>
                    <p id="gachaStatus" class="gacha-status">Pick a set, then open a pack.</p>

                    <div class="gacha-bounce-wrap">
                      <div
                        id="gachaBounceCards"
                        class="bounceCardsContainer"
                        role="listbox"
                        aria-label="Choose one pack"
                      ></div>
                      <p id="gachaBounceLabel" class="gacha-bounce-label">Choose 1 out of 7 packs</p>
                    </div>
                  </div>

                  <button
                    id="gachaInfoToggleBtn"
                    class="gacha-info-toggle"
                    type="button"
                    aria-label="Show odds"
                    aria-pressed="false"
                  >
                    Odds
                  </button>

                  <aside id="gachaPopoutInfo" class="gacha-popout-info" aria-label="Pack possible contents">
                    <div id="gachaContentsPreview" class="gacha-contents-preview"></div>
                  </aside>

                  <section id="gachaDrawReview" class="gacha-draw-review" aria-label="Draw review" hidden>
                    <header class="gacha-draw-review-header">
                      <h3>Draw Review</h3>
                      <p id="gachaDrawReviewMeta">Review your pulled cards.</p>
                    </header>
                    <div id="gachaResult" class="gacha-result"></div>
                    <div class="gacha-draw-review-actions">
                      <button id="gachaAddToBinderBtn" type="button">
                        Add to Binder
                      </button>
                    </div>
                  </section>
                </div>
              </section>
            </div>

          </section>
        </section>
      </main>
    </div>

    <template id="emptyStateTemplate">
      <div class="empty-state">
        <p>No cards found. Try another search or set.</p>
      </div>
    </template>

    <div id="cardModal" class="card-modal" aria-hidden="true">
      <div class="card-modal-backdrop" data-close-modal></div>
      <section class="card-float" role="dialog" aria-modal="true" aria-label="Card preview">
        <div id="modalTiltStage" class="tilt-stage">
          <div id="modalTiltCard" class="tilt-card">
            <div id="modalFlipCard" class="modal-flip-card is-revealed">
              <div class="modal-card-face modal-card-back">
                <img
                  id="modalCardBackImage"
                  src="/cardback.jpg"
                  alt="Pokemon card back"
                  draggable="false"
                />
              </div>
              <div class="modal-card-face modal-card-front">
                <img
                  id="modalCardFrontImage"
                  src=""
                  alt="Pokemon card preview"
                  draggable="false"
                />
              </div>
            </div>
            <div id="modalNextCard" class="modal-next-card" hidden>
              <img
                id="modalNextCardImage"
                src=""
                alt="Next card preview"
                draggable="false"
              />
            </div>
          </div>
        </div>
        <p id="modalHint" class="float-hint">Hold and drag to tilt. Press Esc to close.</p>
        <div id="modalRevealInfo" class="modal-reveal-info" hidden>
          <p id="modalRevealCounter" class="modal-reveal-counter"></p>
          <p id="modalRevealRarity" class="modal-reveal-rarity"></p>
        </div>
      </section>
    </div>

    <script src="/app.js"></script>
  </body>
</html>
